<!DOCTYPE html>
<html>
<head>
  <title>Bathroom Finder</title>
  <style>

    * {
      margin: 0;
      padding: 0;
    }
    #map {
      margin: 20px 0px 0px 0px;
      height: 500px;
      width: 100%;
    }
  </style>

</head>
<body>

<input type="text" name="textbox1" id="textbox1" />
<button type="button" onclick="whereAmI()">Submit</button>


<div id="map"></div>

<script>


  var map, infoWindow;
  function initMap() {

  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: -34.397, lng: 150.644},
    zoom: 6
  });

  infoWindow = new google.maps.InfoWindow;

  if(navigator.geolocation) {

    navigator.geolocation.getCurrentPosition(function(position){
      var pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };

      infoWindow.setPosition(pos);
      infoWindow.setContent('Location Found.');
      infoWindow.open(map);
      map.setCenter(pos);

      var marker = new google.maps.Marker({
        position: pos,
        map: map
      });
      marker.setMap(map);
      
    }, function(){
      handleLocationError(true, infoWindow, map.getCenter());

    });
  } else {
    handleLocationError(false, infoWindow, map.getCenter());
  }
}
  function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    infoWindow.setPosition(pos);
    infoWindow.setContent(browserHasGeolocation ?
      'Error, the geolocation service has failed' : 'Your browser does not support geolocation');
    infoWindow.open(map);
  }
</script>

<script>

var map;

function whereAmI() {

  var locationName = document.getElementById("textbox1").value;
  var geocoder = new google.maps.Geocoder();

  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 0, lng: 0},
    zoom: 8
  });

  geocoder.geocode({'address': locationName}, function(results, status) {
    if (status === 'OK') {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        position: results[0].geometry.location,
        map: map
      });
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}

</script>


<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5KLkxN6PS2oQmYYC_y7Svxhuv8oIkA4o
&callback=initMap" type="text/javascript"></script>

</body>
</html>
